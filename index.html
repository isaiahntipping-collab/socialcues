<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Who’s Real? Multiplayer</title>
<style>
body {margin:0;font-family:system-ui,sans-serif;background:#0f1220;color:#fff;display:flex;justify-content:center;align-items:center;height:100vh;}
.card {background:#1c2040;padding:24px;border-radius:12px;width:100%;max-width:380px;text-align:center;}
input,button{width:100%;padding:12px;margin-top:12px;border-radius:8px;border:none;font-size:16px;}
button{background:#6b7cff;color:#fff;cursor:pointer;}
input{background:#2b2f55;color:#fff;text-align:center;letter-spacing:2px;}
.room-code{font-size:28px;letter-spacing:4px;margin-top:16px;}
.player-list{margin-top:16px;text-align:left;}
.hidden{display:none;}
</style>
</head>
<body>

<div class="card" id="home">
  <h1>Who’s Real?</h1>
  <input id="playerName" placeholder="YOUR NAME"/>
  <button onclick="createRoom()">Create Room</button>
  <input id="roomInput" placeholder="ENTER ROOM CODE"/>
  <button onclick="joinRoom()">Join Room</button>
</div>

<div class="card hidden" id="room">
  <h2>Room Code</h2>
  <div class="room-code" id="roomCode"></div>
  <p>Players:</p>
  <ul class="player-list" id="playerList"></ul>
  <p id="status">Waiting for players...</p>
</div>

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-database-compat.js"></script>

<script>
  // --- FIREBASE CONFIG ---
  const firebaseConfig = {
    apiKey: "YOUR_API_KEY",
    authDomain: "YOUR_PROJECT.firebaseapp.com",
    databaseURL: "https://YOUR_PROJECT.firebaseio.com",
    projectId: "YOUR_PROJECT",
    storageBucket: "YOUR_PROJECT.appspot.com",
    messagingSenderId: "SENDER_ID",
    appId: "APP_ID"
  };
  firebase.initializeApp(firebaseConfig);
  const db = firebase.database();

  let roomCode = '';
  let playerId = Math.random().toString(36).substring(2,8);
  let playerName = '';

  function generateRoomCode() {
    return Math.random().toString(36).substring(2,6).toUpperCase();
  }

  function createRoom() {
    playerName = document.getElementById("playerName").value.trim();
    if(!playerName){alert("Enter your name");return;}
    roomCode = generateRoomCode();
    enterRoom();
    db.ref('rooms/'+roomCode).set({
      host: playerId,
      players: {[playerId]: playerName},
      round: 0
    });
    listenForPlayers();
  }

  function joinRoom() {
    playerName = document.getElementById("playerName").value.trim();
    if(!playerName){alert("Enter your name");return;}
    const input = document.getElementById("roomInput").value.trim().toUpperCase();
    if(input.length !== 4){alert("Enter 4-letter code"); return;}
    roomCode = input;
    enterRoom();
    db.ref('rooms/'+roomCode+'/players/'+playerId).set(playerName);
    listenForPlayers();
  }

  function enterRoom(){
    document.getElementById("home").classList.add("hidden");
    document.getElementById("room").classList.remove("hidden");
    document.getElementById("roomCode").innerText = roomCode;
  }

  function listenForPlayers(){
    db.ref('rooms/'+roomCode+'/players').on('value', snapshot=>{
      const players = snapshot.val();
      const listEl = document.getElementById("playerList");
      listEl.innerHTML = '';
      for(const id in players){
        const li = document.createElement('li');
        li.innerText = players[id];
        listEl.appendChild(li);
      }
    });
  }
</script>

</body>
</html>

